<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [

  <!ENTITY dhfirstname "Damir">
  <!ENTITY dhsurname   "Yakupov">
  <!ENTITY dhusername  "&dhfirstname; Sh. &dhsurname; ">
  <!ENTITY dhemail     "yds@bk.ru">
  <!ENTITY dhsection   "5">
  <!ENTITY dhpackage   "kurenma">
  <!ENTITY dhtitle     "&dhpackage; package configuration file">
  <!ENTITY dhlpackage  "<citerefentry><refentrytitle>&dhpackage;</refentrytitle><manvolnum>7</manvolnum></citerefentry>">
  <!ENTITY dhNAME      "KURENMA.INI">
  <!ENTITY dhname      "kurenma.ini">
  <!ENTITY dhlservice  "<citerefentry><refentrytitle>&dhpackage;d</refentrytitle><manvolnum>1</manvolnum></citerefentry>">
  <!ENTITY dhwg        "<citerefentry><refentrytitle>wg</refentrytitle><manvolnum>1</manvolnum></citerefentry>">
]>

<refentry>
  <refentryinfo>
    <title>&dhtitle;</title>
    <productname>&dhname;</productname>
    <authorgroup>
      <author>
       <firstname>&dhfirstname;</firstname>
        <surname>&dhsurname;</surname>
        <contrib>Wrote this manpage for the Debian system.</contrib>
        <address>
          <email>&dhemail;</email>
        </address>
      </author>
    </authorgroup>
    <copyright>
      <year>2016</year>
      <holder>&dhusername;</holder>
    </copyright>
    <legalnotice>
      <para>Permission is granted to copy, distribute and/or modify this
        document under the terms of the GNU General Public License,
        Version 2 or any later version published by
        the Free Software Foundation.</para>
      <para>On Debian systems, the complete text of the GNU General Public
        License can be found in
        <filename>/usr/share/common-licenses/GPL</filename>.</para>
    </legalnotice>
  </refentryinfo>
  <refmeta>
    <refentrytitle>&dhNAME;</refentrytitle>
    <manvolnum>&dhsection;</manvolnum>
  </refmeta>
  <refnamediv>
    <refname>&dhname;</refname>
    <refpurpose>is a configuration file of &dhlpackage;</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
   <para>
    The <refname>&dhname;</refname> contains runtime configuration information for the &dhpackage;
    programs. The complete description of the file format and possible
    parameters held within are here for reference purposes.
   </para>
  </refsynopsisdiv>
  <refsect1 id="description">
   <title>DESCRIPTION</title>
    <para>
     <refname>&dhname;</refname> - main configuration file. It defines the behavior
     of the service - a client or server, sets the network settings and used OpenSSL keys.
    </para>
  </refsect1>
  <refsect1 id="file format">
   <title>FILE FORMAT</title>
   <para>
    The file consists of sections and parameters. A section begins with the
    name of the section in square brackets (or top of the file for global unnamed section) and continues until the next
    section begins. Global unnamed section contain global settings.
    Sections contain parameters of the form:
   </para>
   <para>
    name = value
   </para>
   <para>
    or for some special sections contain sequence of "raw" lines, each of which is a unnamed parameter.
    For example, allowed IPv4 networks
   </para>
   <para>
    Section and parameter names are case sensitive.
   </para>
   <para>
    Any line beginning with a hash ("#") character is
    ignored, as are lines containing only whitespace.
   </para>
  </refsect1>

  <refsect1 id="section descriptions">
   <title>SECTION DESCRIPTIONS</title>
    <para>
     There are three special sections, unnamed global, [ssl] and [ipsAllowed]
     which are described under special sections
    </para>
  </refsect1>

  <refsect1 id="section global unnamed">
   <title>SECTION GLOBAL UNNAMED</title>
   <para>
    This section contain global named parameters:
   </para>
   <variablelist>
    <varlistentry>
     <term><varname>role</varname></term>
      <listitem>
       <para>
        constant string parameter (<constant>client</constant> or <constant>server</constant>)
        define the role of &dhlservice; - client or server. Service for client role send requests
	for tunnel creating to the server and check tunnel state, for server role - listen client
	requests for tunnel creation only.
       </para>
       <example>role = client</example>
      </listitem>
    </varlistentry>
    <varlistentry>
     <term><varname>host</varname></term>
      <listitem>
       <para>
        string parameter that define valid hostname or IPv4 address of the server side of &dhlservice;
       </para>
       <example>host = server.domain.name</example>
      </listitem>
    </varlistentry>
    <varlistentry>
     <term><varname>port</varname></term>
      <listitem>
       <para>
        number parameter that define valid UDP port (1 ..65535) of the server side of &dhlservice;
       </para>
       <example>port = 12912</example>
      </listitem>
    </varlistentry>
    <varlistentry>
     <term><varname>portAuth</varname></term>
      <listitem>
       <para>
        number parameter that define valid TCP port (1 ..65535) of the server side of &dhlservice;
	default value 42912
       </para>
       <example>portAuth = 42912</example>
      </listitem>
    </varlistentry>
    <varlistentry>
     <term><varname>tsKeepalive</varname></term>
      <listitem>
       <para>
        number parameter (1 .. 65535) of time interval in seconds.
	default value is 0 (disabled).
	this option supported Wireguard option "PersistentKeepalive" for keep connection
	when peer is behind NAT or a firewall, see &dhwg;
       </para>
       <example>tsKeepalive = 25</example>
      </listitem>
    </varlistentry>
    <varlistentry>
     <term><varname>DEBUGLEVEL</varname></term>
      <listitem>
       <para>
        integer parameter sets the level of messages:
       </para>
       <para>
        0 - silent
       </para>
       <para>
        1 - normal
       </para>
       <para>
        2 - information
       </para>
       <para>
        3 - debug
       </para>
       <example>DEBUGLEVEL = 1</example>
      </listitem>
     </varlistentry>
    </variablelist>
  </refsect1>
  <refsect1 id="section ipsAllowed">
   <title>SECTION [ipsAllowed]</title>
   <para>
    [ipsAllowed] sections are given sequence of networks permitted to WireGuard tunnel.
    <constant>
     Example:
    </constant>
   </para>
   <para>[ipsAllowed]</para>
   <para>192.168.0.0/24</para>
  </refsect1>
  <refsect1 id="section ssl">
   <title>SECTION [ssl]</title>
   <para>
    [ssl] section should contain the string parameters for client/server peers binding
   </para>
  </refsect1>
  <refsect1 id="files">
    <title>FILES</title>
    <variablelist>
      <varlistentry>
	<term><filename>/etc/kurenma/kurenma.ini</filename></term>
        <listitem>
          <para>
           Configuration file for &dhlservice;
	  </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsect1>
  <refsect1 id="see_also">
    <title>SEE ALSO</title>
    <para>
     <citerefentry>
      <refentrytitle>kurenmad</refentrytitle>
      <manvolnum>1</manvolnum>
     </citerefentry>
     &nbsp;
     <citerefentry>
      <refentrytitle>kurenma.ini</refentrytitle>
      <manvolnum>5</manvolnum>
     </citerefentry>
    </para>
    <para>The programs are documented fully by <citetitle>Damir Sh. Yakupov</citetitle> available via the <citerefentry>
        <refentrytitle>info</refentrytitle>
        <manvolnum>1</manvolnum>
      </citerefentry> system.</para>
  </refsect1>
</refentry>

